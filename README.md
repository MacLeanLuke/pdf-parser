# Mercy Networks

Mercy Networks is a production-ready Next.js 14 application that connects people experiencing homelessness—and the caseworkers who serve them—to nearby shelters, meals, medical care, and housing programs. Upload a PDF or share a website, let the app extract the key service details with the Vercel AI SDK, and store the structured result in PostgreSQL using Drizzle ORM so everyone can find it next time.

## Features

- Natural-language search that understands needs like “bed tonight near Plano” or “housing voucher help.”
- Upload a PDF flyer or intake packet and trigger server-side parsing with `pdf-parse`.
- Scan public program web pages and extract who the service helps, where it is, and what’s required.
- Persist raw text, structured service data, and references in PostgreSQL.
- Review results instantly with a plain-language summary (“Who this helps,” “What’s required,” “Where it is”).
- Browse and search previously added services from the records view.

## Getting Started

1. **Install dependencies**

   ```bash
   npm install
   ```

2. **Environment variables**

   Create a `.env.local` file with:

   ```bash
   OPENAI_API_KEY=your-openai-key
   DATABASE_URL=postgresql://user:password@host:5432/database
   OPENAI_MODEL=gpt-4.1 # optional, defaults to gpt-4.1
   GOOGLE_CSE_ID=custom-search-engine-id
   GOOGLE_CSE_KEY=custom-search-api-key
   ```

3. **Run migrations**

   ```bash
   npm run db:migrate
   ```

   The configuration lives in `drizzle.config.ts` and migrations are stored in the `drizzle/` directory.

4. **Start the dev server**

   ```bash
   npm run dev
   ```

   Open [http://localhost:3000](http://localhost:3000) to access the app.

## Project Structure

- `app/` – App Router pages and API routes (`/api/parse-eligibility`, `/api/parse-url`, `/api/web-search`, `/api/eligibility-records`).
- `db/` – Drizzle schema and database client.
- `lib/` – PDF parsing helpers, eligibility schema, and AI integration.
- `drizzle/` – SQL migrations generated by Drizzle Kit.

## Deployment

Deploy like any other Next.js 14 application. Provide `OPENAI_API_KEY` and `DATABASE_URL` in the target environment. If deploying to platforms that require SSL for Postgres connections, set `sslmode` within the `DATABASE_URL` or adjust the pool configuration in `db/index.ts`.

## Brand Guide

- **Identity:** Mercy Networks — “Where help finds you.”
- **Colors:** Trust Blue `#2563EB`, Mercy Green `#10B981`, Slate `#1E293B`, Soft Gray `#CBD5E1`, Soft White `#F8FAFC`, Navy `#0F172A`, Ember Orange `#F97316`.
- **Typography:** IBM Plex Serif (headings) + Inter (UI/body).
- **Components:** Light, rounded cards; compassionate microcopy; clear sections (“Who this helps,” “What’s required,” “Where it is”).
- Detailed system documentation lives in [`docs/BRAND_GUIDE.md`](docs/BRAND_GUIDE.md) and the `/docs/brand` route.

## License

MIT © Luke Amy
